<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéµ –ò–≥—Ä–∞ "–ü–æ–≤—Ç–æ—Ä–∏ –º–µ–ª–æ–¥–∏—é"</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: white;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #e0e0e0;
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 15px;
        }
        
        .info-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .info-label {
            font-size: 0.9rem;
            margin-bottom: 5px;
            color: #e0e0e0;
        }
        
        .info-value {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .melody-display {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .melody-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #ffcc00;
        }
        
        .melody-sequence {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .note-indicator {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            background: rgba(255, 255, 255, 0.2);
            transition: all 0.3s;
        }
        
        .note-indicator.active {
            background: #ffcc00;
            transform: scale(1.2);
            box-shadow: 0 0 15px #ffcc00;
        }
        
        .note-indicator.correct {
            background: #4CAF50;
        }
        
        .note-indicator.incorrect {
            background: #f44336;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .control-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .play-btn {
            background: #4CAF50;
            color: white;
        }
        
        .play-btn:hover {
            background: #45a049;
            transform: translateY(-3px);
        }
        
        .repeat-btn {
            background: #2196F3;
            color: white;
        }
        
        .repeat-btn:hover {
            background: #0b7dda;
            transform: translateY(-3px);
        }
        
        .notes-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .note-btn {
            aspect-ratio: 1;
            border: none;
            border-radius: 15px;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        .note-btn:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.3);
        }
        
        .note-btn.pressed {
            transform: scale(0.95);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .feedback {
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            margin-bottom: 20px;
            transition: all 0.3s;
        }
        
        .feedback.correct {
            color: #4CAF50;
            text-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }
        
        .feedback.incorrect {
            color: #f44336;
            text-shadow: 0 0 10px rgba(244, 67, 54, 0.5);
        }
        
        .level-progress {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            width: 0%;
            transition: width 0.5s;
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: left;
        }
        
        .instructions h3 {
            margin-bottom: 10px;
            color: #ffcc00;
        }
        
        .instructions ol {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 8px;
            line-height: 1.4;
        }
        
        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            display: none;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ffcc00;
            opacity: 0;
        }
        
        @keyframes confetti-fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .notes-container {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .note-btn {
                font-size: 1.8rem;
            }
            
            .game-info {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéµ –ü–æ–≤—Ç–æ—Ä–∏ –º–µ–ª–æ–¥–∏—é</h1>
        <p class="subtitle">–°–ª—É—à–∞–π –º–µ–ª–æ–¥–∏—é –∏ –ø–æ–≤—Ç–æ—Ä—è–π –µ—ë, –Ω–∞–∂–∏–º–∞—è –Ω–∞ –Ω–æ—Ç—ã!</p>
        
        <div class="game-info">
            <div class="info-item">
                <span class="info-label">–£—Ä–æ–≤–µ–Ω—å</span>
                <span class="info-value" id="level">1</span>
            </div>
            <div class="info-item">
                <span class="info-label">–û—á–∫–∏</span>
                <span class="info-value" id="score">0</span>
            </div>
            <div class="info-item">
                <span class="info-label">–ñ–∏–∑–Ω–∏</span>
                <span class="info-value" id="lives">3</span>
            </div>
        </div>
        
        <div class="melody-display">
            <div class="melody-title" id="melodyTitle">–ú–µ–ª–æ–¥–∏—è #1</div>
            <div class="melody-sequence" id="melodySequence">
                <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–æ—Ç –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
            </div>
            <div class="level-progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
        </div>
        
        <div class="controls">
            <button class="control-btn play-btn" id="playBtn">
                ‚ñ∂Ô∏è –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏
            </button>
            <button class="control-btn repeat-btn" id="repeatBtn">
                üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å
            </button>
        </div>
        
        <div class="feedback" id="feedback">
            –ù–∞–∂–º–∏ "–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏", —á—Ç–æ–±—ã —É—Å–ª—ã—à–∞—Ç—å –º–µ–ª–æ–¥–∏—é!
        </div>
        
        <div class="notes-container" id="notesContainer">
            <!-- –ö–Ω–æ–ø–∫–∏ –Ω–æ—Ç –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
        </div>
        
        <div class="instructions">
            <h3>–ö–∞–∫ –∏–≥—Ä–∞—Ç—å:</h3>
            <ol>
                <li>–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É "–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏", —á—Ç–æ–±—ã –ø–æ—Å–ª—É—à–∞—Ç—å –º–µ–ª–æ–¥–∏—é</li>
                <li>–ó–∞–ø–æ–º–Ω–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–æ—Ç</li>
                <li>–ü–æ–≤—Ç–æ—Ä–∏ –º–µ–ª–æ–¥–∏—é, –Ω–∞–∂–∏–º–∞—è –Ω–∞ –Ω–æ—Ç—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ</li>
                <li>–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π –æ—á–∫–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏ –Ω–∞ –Ω–æ–≤—ã–µ —É—Ä–æ–≤–Ω–∏!</li>
            </ol>
        </div>
    </div>
    
    <div class="celebration" id="celebration">
        <!-- –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞ -->
    </div>

    <script>
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const levelElement = document.getElementById('level');
        const scoreElement = document.getElementById('score');
        const livesElement = document.getElementById('lives');
        const melodyTitle = document.getElementById('melodyTitle');
        const melodySequence = document.getElementById('melodySequence');
        const progressBar = document.getElementById('progressBar');
        const playBtn = document.getElementById('playBtn');
        const repeatBtn = document.getElementById('repeatBtn');
        const feedback = document.getElementById('feedback');
        const notesContainer = document.getElementById('notesContainer');
        const celebration = document.getElementById('celebration');
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
        let level = 1;
        let score = 0;
        let lives = 3;
        let currentMelody = [];
        let userSequence = [];
        let isPlaying = false;
        let isUserTurn = false;
        let notePlaySpeed = 800; // —Å–∫–æ—Ä–æ—Å—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –Ω–æ—Ç –≤ –º—Å
        
        // –ù–æ—Ç—ã –∏ –∏—Ö —á–∞—Å—Ç–æ—Ç—ã
        const notes = [
            { id: 'C', emoji: 'üéµ', frequency: 261.63, color: '#FF5252' },
            { id: 'D', emoji: 'üé∂', frequency: 293.66, color: '#FF9800' },
            { id: 'E', emoji: 'üéº', frequency: 329.63, color: '#FFEB3B' },
            { id: 'F', emoji: 'üéπ', frequency: 349.23, color: '#4CAF50' },
            { id: 'G', emoji: 'üé§', frequency: 392.00, color: '#2196F3' },
            { id: 'A', emoji: 'üéß', frequency: 440.00, color: '#9C27B0' },
            { id: 'B', emoji: 'ü•Å', frequency: 493.88, color: '#E91E63' },
            { id: 'C2', emoji: 'üéª', frequency: 523.25, color: '#00BCD4' }
        ];
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞—É–¥–∏–æ–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –Ω–æ—Ç—ã
        function playNote(frequency, duration = 0.5) {
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.type = 'sine';
            oscillator.frequency.value = frequency;
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
            
            return oscillator;
        }
        
        // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –Ω–æ—Ç
        function createNoteButtons() {
            notesContainer.innerHTML = '';
            
            notes.forEach(note => {
                const button = document.createElement('button');
                button.className = 'note-btn';
                button.innerHTML = note.emoji;
                button.dataset.note = note.id;
                button.style.background = note.color;
                
                button.addEventListener('click', () => {
                    if (!isUserTurn) return;
                    
                    // –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
                    button.classList.add('pressed');
                    setTimeout(() => {
                        button.classList.remove('pressed');
                    }, 200);
                    
                    // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –Ω–æ—Ç—ã
                    playNote(note.frequency, 0.3);
                    
                    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ—Ç—ã –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    userSequence.push(note.id);
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
                    checkUserSequence();
                });
                
                notesContainer.appendChild(button);
            });
        }
        
        // –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–π –º–µ–ª–æ–¥–∏–∏
        function generateMelody() {
            currentMelody = [];
            const melodyLength = 3 + level; // –î–ª–∏–Ω–∞ –º–µ–ª–æ–¥–∏–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å —É—Ä–æ–≤–Ω–µ–º
            
            for (let i = 0; i < melodyLength; i++) {
                const randomIndex = Math.floor(Math.random() * notes.length);
                currentMelody.push(notes[randomIndex].id);
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            updateMelodyDisplay();
        }
        
        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–µ–ª–æ–¥–∏–∏
        function updateMelodyDisplay() {
            melodySequence.innerHTML = '';
            melodyTitle.textContent = `–ú–µ–ª–æ–¥–∏—è #${level}`;
            
            currentMelody.forEach(noteId => {
                const noteIndicator = document.createElement('div');
                noteIndicator.className = 'note-indicator';
                noteIndicator.textContent = notes.find(note => note.id === noteId).emoji;
                noteIndicator.dataset.note = noteId;
                melodySequence.appendChild(noteIndicator);
            });
        }
        
        // –§—É–Ω–∫—Ü–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –º–µ–ª–æ–¥–∏–∏
        function playMelody() {
            if (isPlaying) return;
            
            isPlaying = true;
            playBtn.disabled = true;
            feedback.textContent = '–°–ª—É—à–∞–π –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ...';
            feedback.className = 'feedback';
            
            let delay = 0;
            
            currentMelody.forEach((noteId, index) => {
                setTimeout(() => {
                    // –í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ–π –Ω–æ—Ç—ã
                    const noteIndicators = document.querySelectorAll('.note-indicator');
                    noteIndicators[index].classList.add('active');
                    
                    // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –Ω–æ—Ç—ã
                    const note = notes.find(n => n.id === noteId);
                    playNote(note.frequency, 0.5);
                    
                    // –£–±—Ä–∞—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É –ø–æ—Å–ª–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
                    setTimeout(() => {
                        noteIndicators[index].classList.remove('active');
                    }, notePlaySpeed - 100);
                    
                }, delay);
                
                delay += notePlaySpeed;
            });
            
            setTimeout(() => {
                isPlaying = false;
                playBtn.disabled = false;
                isUserTurn = true;
                feedback.textContent = '–¢–≤–æ—è –æ—á–µ—Ä–µ–¥—å! –ü–æ–≤—Ç–æ—Ä–∏ –º–µ–ª–æ–¥–∏—é.';
            }, delay);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function checkUserSequence() {
            const currentIndex = userSequence.length - 1;
            const noteIndicators = document.querySelectorAll('.note-indicator');
            
            // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Ç–µ–∫—É—â–µ–π –Ω–æ—Ç—ã –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            if (currentIndex < noteIndicators.length) {
                noteIndicators[currentIndex].classList.add('active');
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–æ—Ç—ã
                if (userSequence[currentIndex] === currentMelody[currentIndex]) {
                    noteIndicators[currentIndex].classList.add('correct');
                    feedback.textContent = '–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ü—Ä–æ–¥–æ–ª–∂–∞–π...';
                    feedback.className = 'feedback correct';
                } else {
                    noteIndicators[currentIndex].classList.add('incorrect');
                    feedback.textContent = '–û—à–∏–±–∫–∞! –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.';
                    feedback.className = 'feedback incorrect';
                    
                    // –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–π
                    lives--;
                    livesElement.textContent = lives;
                    
                    // –°–±—Ä–æ—Å —Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    setTimeout(() => {
                        resetUserTurn();
                        if (lives <= 0) {
                            gameOver();
                        } else {
                            feedback.textContent = '–ù–∞–∂–º–∏ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å", —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞.';
                        }
                    }, 1000);
                    
                    return;
                }
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            if (userSequence.length === currentMelody.length) {
                // –£—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è
                score += level * 10;
                scoreElement.textContent = score;
                
                feedback.textContent = '–û—Ç–ª–∏—á–Ω–æ! –ú–µ–ª–æ–¥–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!';
                feedback.className = 'feedback correct';
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∞–∑–¥–Ω–∏–∫–∞
                createConfetti();
                
                // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å
                setTimeout(() => {
                    level++;
                    levelElement.textContent = level;
                    
                    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
                    progressBar.style.width = `${((level - 1) % 5) * 20}%`;
                    
                    // –°–±—Ä–æ—Å –¥–ª—è –Ω–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è
                    resetUserTurn();
                    generateMelody();
                    
                    // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–ª–æ–∂–Ω–æ—Å—Ç—å
                    if (level % 3 === 0 && notePlaySpeed > 300) {
                        notePlaySpeed -= 100;
                    }
                    
                    feedback.textContent = '–ì–æ—Ç–æ–≤ –∫ —Å–ª–µ–¥—É—é—â–µ–π –º–µ–ª–æ–¥–∏–∏? –ù–∞–∂–º–∏ "–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏"!';
                }, 1500);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ —Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function resetUserTurn() {
            userSequence = [];
            isUserTurn = false;
            
            // –°–±—Ä–æ—Å –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
            const noteIndicators = document.querySelectorAll('.note-indicator');
            noteIndicators.forEach(indicator => {
                indicator.classList.remove('active', 'correct', 'incorrect');
            });
        }
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã
        function gameOver() {
            feedback.textContent = `–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –¢–≤–æ–π —Å—á—ë—Ç: ${score}`;
            feedback.className = 'feedback incorrect';
            
            // –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ
            setTimeout(() => {
                if (confirm(`–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –¢–≤–æ–π —Å—á—ë—Ç: ${score}. –•–æ—á–µ—à—å —Å—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑?`)) {
                    resetGame();
                }
            }, 1000);
        }
        
        // –§—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ –∏–≥—Ä—ã
        function resetGame() {
            level = 1;
            score = 0;
            lives = 3;
            notePlaySpeed = 800;
            
            levelElement.textContent = level;
            scoreElement.textContent = score;
            livesElement.textContent = lives;
            progressBar.style.width = '0%';
            
            resetUserTurn();
            generateMelody();
            feedback.textContent = '–ù–∞–∂–º–∏ "–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏", —á—Ç–æ–±—ã —É—Å–ª—ã—à–∞—Ç—å –º–µ–ª–æ–¥–∏—é!';
        }
        
        // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏–∫–∞
        function createConfetti() {
            celebration.style.display = 'block';
            celebration.innerHTML = '';
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.animation = `confetti-fall ${2 + Math.random() * 3}s linear forwards`;
                confetti.style.animationDelay = `${Math.random() * 2}s`;
                celebration.appendChild(confetti);
            }
            
            setTimeout(() => {
                celebration.style.display = 'none';
            }, 3000);
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        playBtn.addEventListener('click', playMelody);
        
        repeatBtn.addEventListener('click', () => {
            if (isPlaying) return;
            resetUserTurn();
            playMelody();
        });
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–ª–∏–∫–µ (–¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
        document.addEventListener('click', function initAudio() {
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
            document.removeEventListener('click', initAudio);
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        createNoteButtons();
        generateMelody();
    </script>
</body>
</html>