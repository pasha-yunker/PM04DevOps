<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéµ –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ø–∞–∑–ª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: white;
        }
        
        .container {
            max-width: 1000px;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #e0e0e0;
        }
        
        .game-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .puzzle-area {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 15px;
            display: flex;
            flex-direction: column;
        }
        
        .puzzle-board {
            flex-grow: 1;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 5px;
            aspect-ratio: 1;
            margin-bottom: 15px;
        }
        
        .puzzle-slot {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            border: 2px dashed rgba(255, 255, 255, 0.3);
            overflow: hidden;
        }
        
        .puzzle-slot.correct {
            border: 2px solid #4CAF50;
            background: rgba(76, 175, 80, 0.2);
        }
        
        .puzzle-slot.highlight {
            animation: pulse 1s infinite;
        }
        
        .slot-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }
        
        .pieces-area {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 15px;
            display: flex;
            flex-direction: column;
        }
        
        .pieces-container {
            flex-grow: 1;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 10px;
            aspect-ratio: 1;
        }
        
        .puzzle-piece {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: grab;
            transition: all 0.3s;
            font-size: 2rem;
            border: 2px solid transparent;
            overflow: hidden;
        }
        
        .puzzle-piece:hover {
            transform: scale(1.05);
            background: rgba(255, 255, 255, 0.3);
        }
        
        .puzzle-piece.dragging {
            opacity: 0.7;
            transform: rotate(5deg);
        }
        
        .puzzle-piece.correct {
            border: 2px solid #4CAF50;
            background: rgba(76, 175, 80, 0.3);
        }
        
        .piece-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 15px;
        }
        
        .info-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .info-label {
            font-size: 0.9rem;
            margin-bottom: 5px;
            color: #e0e0e0;
        }
        
        .info-value {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .control-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .reset-btn {
            background: #ff9800;
            color: white;
        }
        
        .reset-btn:hover {
            background: #f57c00;
            transform: translateY(-3px);
        }
        
        .next-btn {
            background: #2196F3;
            color: white;
        }
        
        .next-btn:hover {
            background: #0b7dda;
            transform: translateY(-3px);
        }
        
        .feedback {
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            margin: 15px 0;
            transition: all 0.3s;
            color: #ffcc00;
        }
        
        .feedback.correct {
            color: #4CAF50;
            text-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }
        
        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            display: none;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ffcc00;
            opacity: 0;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 204, 0, 0.7); }
            50% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(255, 204, 0, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 204, 0, 0); }
        }
        
        @keyframes confetti-fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        @media (max-width: 768px) {
            .game-container {
                grid-template-columns: 1fr;
            }
            
            h1 {
                fontSize: 2rem;
            }
            
            .controls {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéµ –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ø–∞–∑–ª</h1>
        <p class="subtitle">–°–æ–±–µ—Ä–∏ –ø–∞–∑–ª –∏ —É—Å–ª—ã—à–∏—à—å —Ä–∞–¥–æ—Å—Ç–Ω—É—é –º–µ–ª–æ–¥–∏—é!</p>
        
        <div class="game-info">
            <div class="info-item">
                <span class="info-label">–£—Ä–æ–≤–µ–Ω—å</span>
                <span class="info-value" id="level">1</span>
            </div>
            <div class="info-item">
                <span class="info-label">–°–æ–±—Ä–∞–Ω–æ –ø–∞–∑–ª–æ–≤</span>
                <span class="info-value" id="completed">0</span>
            </div>
            <div class="info-item">
                <span class="info-label">–û—á–∫–∏</span>
                <span class="info-value" id="score">0</span>
            </div>
        </div>
        
        <div class="game-container">
            <div class="puzzle-area">
                <h3>–ü–æ–ª–µ –¥–ª—è –ø–∞–∑–ª–∞</h3>
                <div class="puzzle-board" id="puzzleBoard">
                    <!-- –°–ª–æ—Ç—ã –¥–ª—è –ø–∞–∑–ª–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
            </div>
            
            <div class="pieces-area">
                <h3>–ß–∞—Å—Ç–∏ –ø–∞–∑–ª–∞</h3>
                <div class="pieces-container" id="piecesContainer">
                    <!-- –ß–∞—Å—Ç–∏ –ø–∞–∑–ª–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
            </div>
        </div>
        
        <div class="feedback" id="feedback">
            –ü–µ—Ä–µ—Ç–∞—â–∏ —á–∞—Å—Ç–∏ –ø–∞–∑–ª–∞ –Ω–∞ –ø–æ–ª–µ!
        </div>
        
        <div class="controls">
            <button class="control-btn reset-btn" id="resetBtn">
                üîÑ –ü–µ—Ä–µ–º–µ—à–∞—Ç—å
            </button>
            <button class="control-btn next-btn" id="nextBtn">
                ‚è≠Ô∏è –°–ª–µ–¥—É—é—â–∏–π –ø–∞–∑–ª
            </button>
        </div>
    </div>
    
    <div class="celebration" id="celebration">
        <!-- –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞ -->
    </div>

    <script>
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const puzzleBoard = document.getElementById('puzzleBoard');
        const piecesContainer = document.getElementById('piecesContainer');
        const levelElement = document.getElementById('level');
        const completedElement = document.getElementById('completed');
        const scoreElement = document.getElementById('score');
        const resetBtn = document.getElementById('resetBtn');
        const nextBtn = document.getElementById('nextBtn');
        const feedback = document.getElementById('feedback');
        const celebration = document.getElementById('celebration');
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
        let completed = 0;
        let score = 0;
        let correctPieces = 0;
        
        // –ü–æ–ª—É—á–∞–µ–º –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ HTML —Ñ–∞–π–ª–∞
        function getImagesPath() {
            // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π –ø—É—Ç—å –∫ HTML —Ñ–∞–π–ª—É
            const currentScriptPath = window.location.href;
            const basePath = currentScriptPath.substring(0, currentScriptPath.lastIndexOf('/'));
            
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ images
            return `${basePath}/images/`;
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞—É–¥–∏–æ–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        // –§—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∞–∑–ª–∞
        function initPuzzle() {
            // –û—á–∏—â–∞–µ–º –¥–æ—Å–∫–∏
            puzzleBoard.innerHTML = '';
            piecesContainer.innerHTML = '';
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —á–∞—Å—Ç–µ–π
            correctPieces = 0;
            
            // –ü–æ–ª—É—á–∞–µ–º –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
            const imagesPath = getImagesPath();
            
            // –°–æ–∑–¥–∞–µ–º —Å–ª–æ—Ç—ã –¥–ª—è –ø–∞–∑–ª–∞
            for (let i = 0; i < 9; i++) {
                const slot = document.createElement('div');
                slot.className = 'puzzle-slot';
                slot.dataset.slotIndex = i;
                
                // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏)
                const slotImage = document.createElement('img');
                slotImage.className = 'slot-image';
                slotImage.alt = `–ß–∞—Å—Ç—å –ø–∞–∑–ª–∞ ${i + 1}`;
                slot.appendChild(slotImage);
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Å–ª–æ—Ç–æ–≤
                slot.addEventListener('dragover', handleDragOver);
                slot.addEventListener('dragenter', handleDragEnter);
                slot.addEventListener('dragleave', handleDragLeave);
                slot.addEventListener('drop', handleDrop);
                
                puzzleBoard.appendChild(slot);
            }
            
            // –°–æ–∑–¥–∞–µ–º —á–∞—Å—Ç–∏ –ø–∞–∑–ª–∞ (–ø–µ—Ä–µ–º–µ—à–∞–Ω–Ω—ã–µ)
            const pieceIndexes = [0, 1, 2, 3, 4, 5, 6, 7, 8];
            const shuffledIndexes = [...pieceIndexes].sort(() => Math.random() - 0.5);
            
            shuffledIndexes.forEach((pieceIndex, index) => {
                const piece = document.createElement('div');
                piece.className = 'puzzle-piece';
                piece.draggable = true;
                piece.dataset.pieceIndex = pieceIndex;
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —Ü–≤–µ—Ç —Ñ–æ–Ω–∞
                const hue = Math.floor(Math.random() * 360);
                piece.style.background = `hsla(${hue}, 70%, 60%, 0.7)`;
                
                // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                const pieceImage = document.createElement('img');
                pieceImage.className = 'piece-image';
                pieceImage.alt = `–ß–∞—Å—Ç—å –ø–∞–∑–ª–∞ ${pieceIndex + 1}`;
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
                pieceImage.src = `${imagesPath}puzzle_${pieceIndex + 1}.jpg`;
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
                pieceImage.onerror = function() {
                    console.warn(`–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ${pieceImage.src}`);
                    // –ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–æ–º–µ—Ä –≤–º–µ—Å—Ç–æ –∫–∞—Ä—Ç–∏–Ω–∫–∏
                    piece.innerHTML = pieceIndex + 1;
                    piece.style.display = 'flex';
                    piece.style.alignItems = 'center';
                    piece.style.justifyContent = 'center';
                    piece.style.fontSize = '1.5rem';
                    piece.style.fontWeight = 'bold';
                    piece.style.color = 'white';
                };
                
                piece.appendChild(pieceImage);
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
                piece.addEventListener('dragstart', handleDragStart);
                piece.addEventListener('dragend', handleDragEnd);
                
                piecesContainer.appendChild(piece);
            });
            
            feedback.textContent = '–ü–µ—Ä–µ—Ç–∞—â–∏ —á–∞—Å—Ç–∏ –ø–∞–∑–ª–∞ –Ω–∞ –ø–æ–ª–µ!';
            feedback.className = 'feedback';
        }
        
        // –§—É–Ω–∫—Ü–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è —Ä–∞–¥–æ—Å—Ç–Ω–æ–π –º–µ–ª–æ–¥–∏–∏
        function playSuccessMelody() {
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
            
            // –ü—Ä–æ—Å—Ç–∞—è —Ä–∞–¥–æ—Å—Ç–Ω–∞—è –º–µ–ª–æ–¥–∏—è (–º–∞–∂–æ—Ä–Ω–æ–µ —Ç—Ä–µ–∑–≤—É—á–∏–µ)
            const notes = [523.25, 659.25, 783.99]; // C, E, G
            let delay = 0;
            
            notes.forEach(note => {
                setTimeout(() => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.type = 'sine';
                    oscillator.frequency.value = note;
                    
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.3);
                }, delay);
                
                delay += 200; // –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –Ω–æ—Ç–∞–º–∏
            });
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
        function handleDragStart(e) {
            this.classList.add('dragging');
            e.dataTransfer.setData('text/plain', this.dataset.pieceIndex);
        }
        
        function handleDragEnd() {
            this.classList.remove('dragging');
        }
        
        function handleDragOver(e) {
            e.preventDefault();
        }
        
        function handleDragEnter(e) {
            e.preventDefault();
            this.classList.add('highlight');
        }
        
        function handleDragLeave() {
            this.classList.remove('highlight');
        }
        
        function handleDrop(e) {
            e.preventDefault();
            this.classList.remove('highlight');
            
            const pieceIndex = e.dataTransfer.getData('text/plain');
            const slotIndex = this.dataset.slotIndex;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ª–∏ –º–µ—Å—Ç–æ
            if (pieceIndex === slotIndex) {
                // –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ
                const piece = document.querySelector(`.puzzle-piece[data-piece-index="${pieceIndex}"]`);
                const pieceImage = piece.querySelector('.piece-image');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–ª–æ—Ç–µ
                const slotImage = this.querySelector('.slot-image');
                if (pieceImage && pieceImage.src) {
                    slotImage.src = pieceImage.src;
                    slotImage.style.display = 'block';
                }
                
                this.classList.add('correct');
                
                // –ü–æ–º–µ—á–∞–µ–º —á–∞—Å—Ç—å –ø–∞–∑–ª–∞ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é
                piece.classList.add('correct');
                piece.draggable = false;
                piece.style.cursor = 'default';
                piece.style.opacity = '0.7';
                
                // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º —Ä–∞–¥–æ—Å—Ç–Ω—É—é –º–µ–ª–æ–¥–∏—é
                playSuccessMelody();
                
                correctPieces++;
                
                if (correctPieces === 9) {
                    // –ü–∞–∑–ª —Å–æ–±—Ä–∞–Ω!
                    completed++;
                    score += 10;
                    
                    completedElement.textContent = completed;
                    scoreElement.textContent = score;
                    
                    feedback.textContent = '–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –ü–∞–∑–ª —Å–æ–±—Ä–∞–Ω!';
                    feedback.className = 'feedback correct';
                    
                    // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
                    createConfetti();
                } else {
                    feedback.textContent = `–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –û—Å—Ç–∞–ª–æ—Å—å —Å–æ–±—Ä–∞—Ç—å ${9 - correctPieces} —á–∞—Å—Ç–µ–π.`;
                }
            } else {
                // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ
                feedback.textContent = '–ü–æ–ø—Ä–æ–±—É–π –¥—Ä—É–≥—É—é —á–∞—Å—Ç—å!';
                
                // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∫–æ—Ä–æ—Ç–∫–∏–π –Ω–∏–∑–∫–∏–π –∑–≤—É–∫ –æ—à–∏–±–∫–∏
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.type = 'sine';
                oscillator.frequency.value = 200;
                
                gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
        function createConfetti() {
            celebration.style.display = 'block';
            celebration.innerHTML = '';
            
            for (let i = 0; i < 150; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.animation = `confetti-fall ${2 + Math.random() * 3}s linear forwards`;
                confetti.style.animationDelay = `${Math.random() * 2}s`;
                celebration.appendChild(confetti);
            }
            
            setTimeout(() => {
                celebration.style.display = 'none';
            }, 4000);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è –ø–∞–∑–ª–∞
        function shufflePuzzle() {
            initPuzzle();
            feedback.textContent = '–ü–∞–∑–ª –ø–µ—Ä–µ–º–µ—à–∞–Ω! –ù–∞—á–∏–Ω–∞–π –∑–∞–Ω–æ–≤–æ!';
        }
        
        // –§—É–Ω–∫—Ü–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–∞–∑–ª–∞ (–ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π)
        function nextPuzzle() {
            initPuzzle();
            feedback.textContent = '–ù–æ–≤—ã–π –ø–∞–∑–ª –≥–æ—Ç–æ–≤! –£–¥–∞—á–∏!';
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        resetBtn.addEventListener('click', shufflePuzzle);
        nextBtn.addEventListener('click', nextPuzzle);
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–ª–∏–∫–µ (–¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
        document.addEventListener('click', function initAudio() {
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
            document.removeEventListener('click', initAudio);
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        initPuzzle();
    </script>
</body>
</html>